CREATE DATABASE FlightManager

CREATE TABLE KhachHang
(
	MaKH		CHAR(8) PRIMARY KEY,
	GioiTinh	NVARCHAR(3),
	TenKH		NVARCHAR(30),
	NgaySinh	SMALLDATETIME,
	LoaiKH		NVARCHAR(20),
	SDT			CHAR(10),
	DiaChi		NVARCHAR(50),
	Email		NVARCHAR(20),
	CCCD		NVARCHAR(20)
)

CREATE TABLE NhanVien
(
	MaNV		CHAR(5) PRIMARY KEY,
	TenNV		NVARCHAR(30),
	SDT			CHAR(10),
	DiaChi		NVARCHAR(50),
	ChucVu		NVARCHAR(30),
	CCCD		NVARCHAR(20),
	
)

CREATE TABLE MayBay
(
	MaMB		CHAR(5) PRIMARY KEY,
	TenMB		NVARCHAR(20),
	Hang		NVARCHAR(20),
	KichThuoc	NVARCHAR(10),
	SoCho		INT
)

CREATE TABLE DuongBay
(
	MaDB		CHAR(3) PRIMARY KEY,
	ViTri		NVARCHAR(30),
	ChieuDai	float,
	ChieuRong	float,
	TinhTrang	NVARCHAR(20)
)

CREATE TABLE ChuyenBay
(
	MaCB		CHAR(8) PRIMARY KEY,
	MaMB		CHAR(5) FOREIGN KEY REFERENCES MayBay (MaMB),
	MaDB		CHAR(3) FOREIGN KEY REFERENCES DuongBay (MaDB),
	NoiKH		NVARCHAR(50),
	NoiDen		NVARCHAR(50)
)

CREATE TABLE Ve
(
	MaVe		CHAR(8) PRIMARY KEY,
	MaCB		CHAR(8) FOREIGN KEY REFERENCES ChuyenBay (MaCB),
	TGKhoiHanh	SMALLDATETIME,
	TGDen		SMALLDATETIME,
	Gia			MONEY
)

CREATE TABLE QLVe
(
	MaCB		CHAR(8) FOREIGN KEY REFERENCES ChuyenBay (MaCB),
	Dot			INT,
	SL			INT,
	TinhTrang	NVARCHAR(20),
	constraint PK_QLVe  primary key (MaCB,Dot)
)

CREATE TABLE HoaDon
(
	MaHD		CHAR(8) PRIMARY KEY,
	MaNV		CHAR(5) FOREIGN KEY REFERENCES NhanVien (MaNV),
	MaKH		CHAR(8) FOREIGN KEY REFERENCES KhachHang (MaKH),
	NgHD		SMALLDATETIME,
	TriGia		MONEY
)

CREATE TABLE CTHD
(
	MaHD		CHAR(8) FOREIGN KEY REFERENCES HoaDon (MaHD),
	MaVe		CHAR(8) FOREIGN KEY REFERENCES Ve (MaVe),
	SL		INT,
	TriGia		MONEY,
	CONSTRAINT PK_CTHD PRIMARY KEY (MaHD,MaVe)
)
//INSERT TABLE KHACHHANG

INSERT INTO KhachHang VALUES('10002001','Nam','Lê Văn Kim','10/12/1988','Thường','0184267382','Kiên Giang','Kim7846@gmail.com','357869463726')
INSERT INTO KhachHang VALUES('10002001','Nữ','Đăng Ngọc Minh','2/5/1997','Thân Thiết','0632891649','Trà Vinh','Maie46@gmail.com','167281074926')
INSERT INTO KhachHang VALUES('10002001','Nam','Nguyễn Thành Đạt','1/1/2000','Vip','0974521565','Nam Định','NTD026@gmail.com','167282047926')
INSERT INTO KhachHang VALUES('10002001','Nam','Gia Tấn Kim','8/8/1999','Vip','0856463733','Hải Phòng','KTG6@gmail.com','167229501926')
INSERT INTO KhachHang VALUES('10002001','Nữ','Lữ Minh Anh','6/9/2001','Thường','0756372819','Đà Nẵng','Ahdks16@gmail.com','167281071205')
INSERT INTO KhachHang VALUES('10002001','Nam','Trần Quang Minh','4/5/1992','Thân Thiết','0956372819','Bắc Giang','Minh246@gmail.com','167281104832')
//INSERT TABLE NHANVIEN


INSERT INTO NhanVien VALUES('10001','Hà Kim Ngọc','0849362118','TP HCM','Thu Ngân','674827564821')
INSERT INTO NhanVien VALUES('10002','Trịnh Đình Quang','0647735218','TP HCM','Thu Ngân','674864900982')
INSERT INTO NhanVien VALUES('10003','Đinh Gia Huy','0658893220','TP HCM','Thu Ngân','671520564821')
INSERT INTO NhanVien VALUES('10004','Huỳnh Nữ','0748392758','TP HCM','Thu Ngân','162842756482')
INSERT INTO NhanVien VALUES('10005','Nguyễn Duy Linh','0645537778','TP HCM','Thu Ngân','674827500643')
//INSERT TABLE MayBay

INSERT INTO MayBay  VALUES('ABA01','Airbus A321','Lớn','305')
INSERT INTO MayBay  VALUES('ABA02','Airbus A321','Lớn','305')
INSERT INTO MayBay  VALUES('ABA03','Airbus A321','Lớn','305')
INSERT INTO MayBay  VALUES('BE001','Boeing 787','Lớn','274')
INSERT INTO MayBay  VALUES('BE002','Boeing 787','Lớn','274')
INSERT INTO MayBay  VALUES('BE003','Boeing 787','Lớn','274')
INSERT INTO MayBay  VALUES('ATR01','ATR 72-500','Nhỏ','68')
INSERT INTO MayBay  VALUES('ATR02','ATR 72-500','Nhỏ','68')
INSERT INTO MayBay  VALUES('ATR03','ATR 72-500','Nhỏ','68')
INSERT INTO MayBay  VALUES('ATR04','ATR 72-500','Nhỏ','68')

//INSERT TABLE DuongBay

INSERT INTO DuongBay VALUES('TN1','07R/25L','12.468','3.8','Đang hoạt động')
INSERT INTO DuongBay VALUES('TN2','07L/25R','10','3.048','Đang hoạt động')
INSERT INTO DuongBay VALUES('NB1','11L/29R','10.497','3.2','Đang hoạt động')
INSERT INTO DuongBay VALUES('NB2','11R/29L','12.466','3.8','Đang hoạt động')

//INSERT TABLE CHUYENBAY

INSERT INTO ChuyenBay VALUES('11110001','ABA01','TN1','TP HCM','Hà Nội')
INSERT INTO ChuyenBay VALUES('11110002','BE002','TN2','TP HCM','Hà Nội')
INSERT INTO ChuyenBay VALUES('11110003','BE003','NB1','Hà Nội','TP HCM')
INSERT INTO ChuyenBay VALUES('11110004','BE004','NB2','Hà Nội','TP HCM')
INSERT INTO ChuyenBay VALUES('11110005','ATR03','NB2','Hà Nội','TP HCM')




